\subsubsection{\stid{6.03} Sandia ATDM Software Ecosystem and Delivery-- OS/On-Node Runtime} 

\paragraph{Overview} 

This project is part of the NNSA/ASC program and is primarily focused
on operating system and runtime system (OS/R) technology
development and evaluation.
The project focuses on the design, implementation, and evaluation of
OS/R interfaces, mechanisms, and policies supporting the efficient
execution of the ATDM application codes on next-generation ASC
platforms. Priorities in this area include the development of
lightweight tasking techniques that integrate network communication,
interfaces between the runtime and OS for management of critical
resources (including multi-level memory, non-volatile memory, and
network interfaces), portable interfaces for managing power and
energy, and resource isolation strategies at the operating system
level that maintain scalability and performance while providing a more
full-featured set of system services. The OS/R technologies developed
by this project will be evaluated in the context of ATDM application
codes running at large-scale on ASC platforms. Through close
collaboration with vendors and the broader community, the intention is
to drive the technologies developed by this project into
vendor-supported system software stacks and gain wide adoption
throughout the HPC community.

\paragraph{Key  Challenges}

Key challenges for this project include:

\begin{itemize}

  \item {\bf Developing best practices for the use of containers and
    virtualization technology to support ATDM applications and
    workloads} Containers are gaining popularity as a way to package
  applications and virtualize the underlying OS to allow a set of
  executables built for one platform to be run unmodified on a
  different platform. There are several different approaches to
  building and deploying containers, each with differing sets of
  capabilities and features.

  \item {\bf Characterizing applications use of MPI and sensivity to
      system noise}  Understanding how applications use MPI and its
    associated  network resources requires both application- and
    hardware-level information that must be coordinated on time scales
    of less than a microsecond. It is also extremely difficult to isolate
    the sources of system noise and characterize the non-local side
    effects of unplanned detours that interrupt application execution
    flow.

  \item {\bf Contributing to the OpenMP specification and MPI standard} 
    To prepare for Exascale and to ensure that our ASC mission applications 
    are well supported by these industry-standard programming models, 
    we represent Sandia on the OpenMP Langauge Committee and MPI Forum.
    We also work with vendors to ensure quality implementations of these
    standards that meet the needs of ASC.

\end{itemize}


\paragraph{Solution Strategy}

The strategy for containers and virtualization is to evaluate the
different technology options using ATDM applications and workflows and
compare the results against a set of evaluation criteria.

In order to characterize applications use of MPI and sensitivity to
system noise, this project has developed a simulation environment that
can be used to track MPI and network resource usage. This project is
also using lightweight operating systems, which are virtually devoid
of system noise, help understand how applications, especially those
employing an ATM programming model, are impacted by OS noise.

\paragraph{Recent Progress}

The team recently completed successful containerization of the NALU 
computational fluid dynamics application.  NALU is a good proxy for 
Sandia's production applications since it uses similar dependences 
and components such as Trilinos and Kokkos but is not a restriced code.
NALU also serves as a basis for the ExaWind ECP application.
The container was developed on the desktop and deployed on one of 
Sandia's Commodity Technology Systems (CTS).

A journal article with analyses of MPI queue behavior observed during
executions of Sandia mini-apps, as well as LAMMPS and CTH, was 
published in {\it Parallel Computing}~\cite{Ferreira:Characterizing:2018}.
The techniques were also applied to SPARC, one of Sandia's ATDM
applications, and an expanded tech report version including the SPARC 
results was prepared for the SPARC team.

\paragraph{Next Steps}

This year a full Sandia ASC mission application will be containerized.

We continue to participate in the OpenMP Language Committee and the 
MPI forum.  Additionally, the team is participating in an ECP working 
group on container technology and using the results of evaluation to 
guide future activities in this area.


